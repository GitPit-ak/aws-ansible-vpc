---
- hosts: localhost
  connection: local
  gather_facts: false
  tasks:
    - name: import outpur_var variable
      include_vars: vars/output_vars
    
    - name: Create Target Group for Devop-ELB
      community.aws.elb_target_group:
        name: Devop-TG
        protocol: http
        region: us-east-2
        port: 80
        vpc_id: vpc-03b60bcb73c20dab9
        health_check_protocol: http
        health_check_path: /
        successful_response_codes: "200,250-260"
        target_type: "instance"
        targets:
          - Id: i-0c397c9b7a19ec456
            Port: 80
        state: present
        wait_timeout: 200
        wait: True
        tags:
          Project: devops


    # - name: Setup ELB for web server
    #   amazon.aws.elb_application_lb:
    #     name: myalb
    #     security_groups:
    #       - sg-12345678
    #       - my-sec-group
    #     subnets:
    #       - subnet-012345678
    #       - subnet-abcdef000
    #     # ip_address_type: "ipv4"
